# Donation Workflow Diagram

## Complete Donation Flow with Decline Functionality

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DONATION LIFECYCLE                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  DONOR   â”‚
â”‚ Creates  â”‚
â”‚ Donation â”‚
â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
     â”‚
     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AVAILABLE  â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
      â”‚                                        â”‚
      â”‚ Receiver Requests                     â”‚
      â–¼                                        â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  REQUESTED   â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
       â”‚                                       â”‚
       â”‚ Donor Reviews Requests               â”‚
       â–¼                                       â”‚
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”                                   â”‚
   â”‚Accept?â”‚                                   â”‚
   â””â”€â”€â”€â”¬â”€â”€â”€â”˜                                   â”‚
       â”‚                                       â”‚
    â”Œâ”€â”€â”´â”€â”€â”                                    â”‚
    â”‚ YES â”‚ NO                                 â”‚
    â””â”€â”€â”¬â”€â”€â”˜  â”‚                                 â”‚
       â”‚     â”‚                                 â”‚
       â”‚     â–¼                                 â”‚
       â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
       â”‚  â”‚ Request Declined â”‚                â”‚
       â”‚  â”‚ (Other receivers â”‚                â”‚
       â”‚  â”‚  can request)    â”‚                â”‚
       â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
       â”‚           â”‚                           â”‚
       â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                                       â”‚
       â–¼                                       â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚ DONOR ACCEPTED  â”‚                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
         â”‚                                     â”‚
         â”‚ Receiver Decides                   â”‚
         â–¼                                     â”‚
     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
     â”‚Confirm?â”‚                                â”‚
     â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                                â”‚
         â”‚                                     â”‚
      â”Œâ”€â”€â”´â”€â”€â”                                  â”‚
      â”‚ YES â”‚ NO (DECLINE)                     â”‚
      â””â”€â”€â”¬â”€â”€â”˜  â”‚                               â”‚
         â”‚     â”‚                               â”‚
         â”‚     â–¼                                â”‚
         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
         â”‚  â”‚ Receiver Declined    â”‚           â”‚
         â”‚  â”‚ â€¢ Request â†’ Declined â”‚           â”‚
         â”‚  â”‚ â€¢ Remove accepted    â”‚           â”‚
         â”‚  â”‚   receiver           â”‚           â”‚
         â”‚  â”‚ â€¢ Notify donor       â”‚           â”‚
         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
         â”‚             â”‚                        â”‚
         â”‚             â–¼                        â”‚
         â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
         â”‚      â”‚Other pending?â”‚                â”‚
         â”‚      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
         â”‚             â”‚                        â”‚
         â”‚          â”Œâ”€â”€â”´â”€â”€â”                     â”‚
         â”‚          â”‚ YES â”‚ NO                  â”‚
         â”‚          â””â”€â”€â”¬â”€â”€â”˜  â”‚                  â”‚
         â”‚             â”‚     â”‚                  â”‚
         â”‚             â–¼     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚      â”‚  REQUESTED   â”‚
         â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚Need        â”‚
    â”‚Volunteer?  â”‚
    â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚
       â”Œâ”€â”€â”´â”€â”€â”
       â”‚ YES â”‚ NO
       â””â”€â”€â”¬â”€â”€â”˜  â”‚
          â”‚     â”‚
          â–¼     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   RECEIVER   â”‚  â”‚ ONGOING  â”‚
    â”‚  CONFIRMED   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
           â”‚               â”‚
           â”‚ Volunteer     â”‚
           â”‚ Accepts       â”‚
           â–¼               â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
    â”‚ ONGOING  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Delivery/Pickup Complete
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ COMPLETED â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Real-time Notification Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SOCKET.IO NOTIFICATION EVENTS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ACTION                          EVENT                    RECIPIENT
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

1. Receiver Requests Donation
   Receiver â†’ Request          â”€â”€â”€â”€â”€â–º new_request       â”€â”€â”€â”€â”€â–º Donor
                                      ğŸ“§ "{Receiver} has requested 
                                          your donation"

2. Donor Accepts Request
   Donor â†’ Accept              â”€â”€â”€â”€â”€â–º request_accepted  â”€â”€â”€â”€â”€â–º Accepted Receiver
                                      ğŸ“§ "Your request for '{Food}' 
                                          has been accepted!"
                               
                               â”€â”€â”€â”€â”€â–º request_declined  â”€â”€â”€â”€â”€â–º Other Receivers
                                      ğŸ“§ "Your request was not accepted"

3. Donor Declines Request
   Donor â†’ Decline             â”€â”€â”€â”€â”€â–º request_declined  â”€â”€â”€â”€â”€â–º Declined Receiver
                                      ğŸ“§ "Your request for '{Food}' 
                                          was declined"

4. Receiver Confirms (Pick Up)
   Receiver â†’ Confirm          â”€â”€â”€â”€â”€â–º donation_confirmed â”€â”€â”€â”€â–º Donor
                                      ğŸ“§ "{Receiver} confirmed and 
                                          will pick it up"

5. Receiver Confirms (Volunteer)
   Receiver â†’ Confirm+Vol      â”€â”€â”€â”€â”€â–º donation_confirmed â”€â”€â”€â”€â–º Donor
                                      ğŸ“§ "{Receiver} confirmed and 
                                          requested a volunteer"

6. Receiver Declines Donation
   Receiver â†’ Decline          â”€â”€â”€â”€â”€â–º donation_declined  â”€â”€â”€â”€â–º Donor
                                      ğŸ“§ "{Receiver} has declined 
                                          your donation"
```

## Status Transition Matrix

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DONATION STATUS TRANSITIONS                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Current Status    â”‚ Action                â”‚ New Status        â”‚ Side Effects
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Available         â”‚ Receiver requests     â”‚ Requested         â”‚ Add to requests[]
                  â”‚                       â”‚                   â”‚
Requested         â”‚ Donor accepts         â”‚ Donor Accepted    â”‚ Set acceptedReceiver
                  â”‚                       â”‚                   â”‚ Decline others
                  â”‚                       â”‚                   â”‚
Requested         â”‚ Donor declines all    â”‚ Available         â”‚ All requests declined
                  â”‚                       â”‚                   â”‚
Donor Accepted    â”‚ Receiver confirms     â”‚ Receiver Confirmedâ”‚ Set needsVolunteer
                  â”‚ (needs volunteer)     â”‚                   â”‚
                  â”‚                       â”‚                   â”‚
Donor Accepted    â”‚ Receiver confirms     â”‚ Ongoing           â”‚ Ready for pickup
                  â”‚ (no volunteer)        â”‚                   â”‚
                  â”‚                       â”‚                   â”‚
Donor Accepted    â”‚ Receiver declines     â”‚ Requested*        â”‚ Remove acceptedReceiver
                  â”‚                       â”‚ OR Available**    â”‚ Mark request declined
                  â”‚                       â”‚                   â”‚
Receiver Confirmedâ”‚ Volunteer accepts     â”‚ Ongoing           â”‚ Assign volunteer
                  â”‚                       â”‚                   â”‚
Ongoing           â”‚ Mark complete         â”‚ Completed         â”‚ Set completedAt
                  â”‚                       â”‚                   â”‚

* If other pending requests exist
** If no other pending requests
```

## Request Status Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       REQUEST STATUS LIFECYCLE                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ PENDING â”‚ â—„â”€â”€ Initial state when receiver requests
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Accept? â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
      â”Œâ”€â”€â”´â”€â”€â”
      â”‚ YES â”‚ NO
      â””â”€â”€â”¬â”€â”€â”˜  â”‚
         â”‚     â”‚
         â–¼     â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ ACCEPTED â”‚  â”‚ DECLINED â”‚ â—„â”€â”€ Final state (rejected)
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ Receiver confirms/declines
         â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ CONFIRMED â”‚ â—„â”€â”€ Final state (successful)
    â”‚    OR     â”‚
    â”‚ DECLINED  â”‚ â—„â”€â”€ Final state (receiver declined)
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## User Journey Map

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         DONOR JOURNEY                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Create Donation
   â”œâ”€â”€ Enter food details
   â”œâ”€â”€ Set location on map
   â””â”€â”€ Submit
       â”‚
       â–¼
2. Receive Request Notification ğŸ””
   â”œâ”€â”€ View pending requests
   â”œâ”€â”€ See receiver details
   â””â”€â”€ Decide: Accept or Decline
       â”‚
       â”œâ”€â”€ ACCEPT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                            â”‚
       â””â”€â”€ DECLINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
                                    â”‚
                                    â–¼
3. Wait for Receiver Confirmation
   â”œâ”€â”€ Receiver confirms ğŸ””
   â”‚   â””â”€â”€ Track donation progress
   â”‚
   â””â”€â”€ Receiver declines ğŸ””
       â””â”€â”€ Donation available again
           â””â”€â”€ Accept other requests

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       RECEIVER JOURNEY                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

1. Browse Available Donations
   â”œâ”€â”€ View on map
   â”œâ”€â”€ Filter by location
   â””â”€â”€ Request donation
       â”‚
       â–¼
2. Wait for Donor Response
   â”œâ”€â”€ Request accepted ğŸ””
   â”‚   â””â”€â”€ Go to step 3
   â”‚
   â””â”€â”€ Request declined ğŸ””
       â””â”€â”€ Browse other donations
           â”‚
           â–¼
3. Confirm or Decline
   â”œâ”€â”€ CONFIRM â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚   â”œâ”€â”€ I'll pick it up     â”‚
   â”‚   â””â”€â”€ Request volunteer   â”‚
   â”‚                           â”‚
   â””â”€â”€ DECLINE â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
       â””â”€â”€ Donation available  â”‚
           for others          â”‚
                              â”‚
                              â–¼
4. Complete Donation
   â”œâ”€â”€ Pick up food
   â”œâ”€â”€ Mark as received
   â””â”€â”€ Rate donor
```

## Database Schema Changes

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DONATION MODEL STRUCTURE                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Donation {
  donor: ObjectId (ref: User)
  foodName: String
  quantity: String
  expiration: Date
  location: {
    lat: Number
    lng: Number
    address: String
  }
  status: Enum [
    'Available',
    'Requested',
    'Donor Accepted',      â—„â”€â”€ Can transition to 'Requested' or 'Available'
    'Receiver Confirmed',      if receiver declines
    'Ongoing',
    'Completed'
  ]
  requests: [{
    receiver: ObjectId (ref: User)
    status: Enum [
      'Pending',
      'Accepted',
      'Declined',          â—„â”€â”€ Set when receiver declines after acceptance
      'Confirmed'
    ]
    requestedAt: Date
  }]
  acceptedReceiver: ObjectId (ref: User)  â—„â”€â”€ Set to null when declined
  needsVolunteer: Boolean
  volunteer: ObjectId (ref: User)
  rating: {
    score: Number (1-5)
    review: String
    ratedBy: ObjectId (ref: User)
    ratedAt: Date
  }
  completedAt: Date
}
```

---

**Legend:**
- ğŸ”” = Real-time notification
- â—„â”€â”€ = New/Modified behavior
- â”€â”€â”€â”€â”€â–º = Data flow direction
